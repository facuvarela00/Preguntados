<main class="fondoRanking">
    <section class="contenedorRanking" style="display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh;">
        <article class="error">
            {{error}}
        </article>

        <article class="rankingPersonal">
            <h1>RANKING PERSONAL</h1>
            <p><strong>PUNTAJE TOTAL PERSONAL: {{puntajeTotal}}</strong></p>
            <div id="scrollable-box" style="height: 300px; overflow-y: scroll; width: 600px; align-self: center; background-color: white">
                <table>
                    <thead>
                    <tr>
                        <th>Posición</th>
                        <th>Puntaje</th>
                    </tr>
                    </thead>
                    <tbody>
                    {{#rankingPersonal}}
                        <tr>
                            <td>{{posicion}}°</td>
                            <td>{{puntaje}}</td>
                        </tr>
                    {{/rankingPersonal}}
                    </tbody>
                </table>
            </div>
        </article>

        <article class="rankingGlobal">
            <h1>RANKING GLOBAL</h1>
            <div id="scrollable-box" style="height: 200px; overflow-y: scroll; width: 600px; align-self: center; background-color: white">
                <table>
                    <thead>
                    <tr>
                        <th>Usuario</th>
                        <th>Posición</th>
                        <th>Puntaje</th>
                    </tr>
                    </thead>
                    <tbody>
                    {{#rankingGlobal}}
                        <tr>
                            <td>
                                <a href="/perfil?id={{idPersonal}}">{{mail}}</a>
                            </td>
                            <td>{{posicion}}°</td>
                            <td>{{puntaje}}</td>
                        </tr>
                    {{/rankingGlobal}}
                    </tbody>
                </table>
            </div>
        </article>
    </section>
</main>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/4.2.0/mustache.min.js"></script>

<script>
    $(document).ready(function() {
        $.ajax({
            url: 'ranking',
            method: 'GET',
            dataType: 'json',
            success: function(data) {
                var template = $('#rankingTemplate').html();
                var rendered = Mustache.render(template, data);
                $('#rankingContainer').html(rendered);
            },
            error: function(error) {
                console.error('Error al cargar los datos:', error);
            }
        });
    });
</script>

<script id="rankingTemplate" type="template">
    <!-- Contenido del template Mustache -->
    <main class="fondoRanking">
        <section class="contenedorRanking" style="display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh;">
            <article class="error">
                {{error}}
            </article>

            <article class="rankingPersonal">
                <h1>RANKING PERSONAL</h1>
                <p><strong>PUNTAJE TOTAL PERSONAL: {{puntajeTotal}}</strong></p>
                <div id="scrollable-box" style="height: 300px; overflow-y: scroll; width: 600px; align-self: center; background-color: white">
                    <table>
                        <thead>
                        <tr>
                            <th>Posición</th>
                            <th>Puntaje</th>
                        </tr>
                        </thead>
                        <tbody>
                        {{#rankingPersonal}}
                            <tr>
                                <td>{{posicion}}°</td>
                                <td>{{puntaje}}</td>
                            </tr>
                        {{/rankingPersonal}}
                        </tbody>
                    </table>
                </div>
            </article>

            <article class="rankingGlobal">
                <h1>RANKING GLOBAL</h1>
                <div id="scrollable-box" style="height: 200px; overflow-y: scroll; width: 600px; align-self: center; background-color: white">
                    <table>
                        <thead>
                        <tr>
                            <th>Usuario</th>
                            <th>Posición</th>
                            <th>Puntaje</th>
                        </tr>
                        </thead>
                        <tbody>
                        {{#rankingGlobal}}
                            <tr>
                                <td>
                                    <a href="/perfil?id={{idPersonal}}">{{mail}}</a>
                                </td>
                                <td>{{posicion}}°</td>
                                <td>{{puntaje}}</td>
                            </tr>
                        {{/rankingGlobal}}
                        </tbody>
                    </table>
                </div>
            </article>
        </section>
    </main>
</script>

</body>
</html>